import{a,j as r,u as B,c as de,g as me}from"./iframe-BlPw6RHN.js";import{u as fe,a as pe,S as $,N as ge}from"./use-form-ae0NiLND.js";import{u as he}from"./UnstyledButton-DT2tpwi4.js";import{S as ve}from"./Stack-quhSlGT0.js";import{f as q,u as L,a as W,B as M,c as Y,k as ye,g as be,b as xe}from"./polymorphic-factory-0CtcYZKl.js";import{t as N,u as G}from"./ScrollArea-DfS6V9t2.js";import{r as D,d as Ce,T as V}from"./TextInput-BD6MJsqd.js";import{G as v}from"./Grid-3nMlZOK-.js";import{c as j}from"./createReactComponent-tFrpk4G_.js";import{A as we}from"./Autocomplete-B3pbZYoq.js";import{A as Re}from"./ActionIcon-_QTefNip.js";function Se(t,e){if(t===e||Number.isNaN(t)&&Number.isNaN(e))return!0;if(!(t instanceof Object)||!(e instanceof Object))return!1;const n=Object.keys(t),{length:s}=n;if(s!==Object.keys(e).length)return!1;for(let c=0;c<s;c+=1){const u=n[c];if(!(u in e)||t[u]!==e[u]&&!(Number.isNaN(t[u])&&Number.isNaN(e[u])))return!1}return!0}function je(t,e){if(!t||!e)return!1;if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n+=1)if(!Se(t[n],e[n]))return!1;return!0}function ke(t){const e=a.useRef([]),n=a.useRef(0);return je(e.current,t)||(e.current=t,n.current+=1),[n.current]}function Te(t,e){a.useEffect(t,ke(e))}function Ne(t,e,n={autoInvoke:!1}){const s=a.useRef(null),c=a.useCallback((...m)=>{s.current||(s.current=window.setTimeout(()=>{t(m),s.current=null},e))},[e]),u=a.useCallback(()=>{s.current&&(window.clearTimeout(s.current),s.current=null)},[]);return a.useEffect(()=>(n.autoInvoke&&c(),u),[u,c]),{start:c,clear:u}}function Me(t,e,n){const s=a.useRef(null),c=a.useRef(null);return a.useEffect(()=>{const u=typeof n=="function"?n():n;return(u||c.current)&&(s.current=new MutationObserver(t),s.current.observe(u||c.current,e)),()=>{s.current?.disconnect()}},[t,e]),c}function Ie(){const[t,e]=a.useState(!1);return a.useEffect(()=>e(!0),[]),t}var Fe={};function _e(){return typeof process<"u"&&Fe?"production":"development"}var H={root:"m_96b553a6"};function $e(t,e){if(!e||!t)return!1;let n=e.parentNode;for(;n!=null;){if(n===t)return!0;n=n.parentNode}return!1}function Ae({target:t,parent:e,ref:n,displayAfterTransitionEnd:s}){const c=a.useRef(-1),[u,m]=a.useState(!1),[d,b]=a.useState(typeof s=="boolean"?s:!1),f=()=>{if(!t||!e||!n.current)return;const l=t.getBoundingClientRect(),g=e.getBoundingClientRect(),h=window.getComputedStyle(t),x=window.getComputedStyle(e),w=N(h.borderTopWidth)+N(x.borderTopWidth),R=N(h.borderLeftWidth)+N(x.borderLeftWidth),C={top:l.top-g.top-w,left:l.left-g.left-R,width:l.width,height:l.height};n.current.style.transform=`translateY(${C.top}px) translateX(${C.left}px)`,n.current.style.width=`${C.width}px`,n.current.style.height=`${C.height}px`},p=()=>{window.clearTimeout(c.current),n.current&&(n.current.style.transitionDuration="0ms"),f(),c.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},y=a.useRef(null),o=a.useRef(null);return a.useEffect(()=>{if(f(),t)return y.current=new ResizeObserver(p),y.current.observe(t),e&&(o.current=new ResizeObserver(p),o.current.observe(e)),()=>{y.current?.disconnect(),o.current?.disconnect()}},[e,t]),a.useEffect(()=>{if(e){const l=g=>{$e(g.target,e)&&(p(),b(!1))};return e.addEventListener("transitionend",l),()=>{e.removeEventListener("transitionend",l)}}},[e]),Ne(()=>{_e()!=="test"&&m(!0)},20,{autoInvoke:!0}),Me(l=>{l.forEach(g=>{g.type==="attributes"&&g.attributeName==="dir"&&p()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:u,hidden:d}}const Ee=Y((t,{transitionDuration:e})=>({root:{"--transition-duration":typeof e=="number"?`${e}ms`:e}})),E=q((t,e)=>{const n=L("FloatingIndicator",null,t),{classNames:s,className:c,style:u,styles:m,unstyled:d,vars:b,target:f,parent:p,transitionDuration:y,mod:o,displayAfterTransitionEnd:l,attributes:g,...h}=n,x=W({name:"FloatingIndicator",classes:H,props:n,className:c,style:u,classNames:s,styles:m,unstyled:d,attributes:g,vars:b,varsResolver:Ee}),w=a.useRef(null),{initialized:R,hidden:C}=Ae({target:f,parent:p,ref:w,displayAfterTransitionEnd:l}),T=G(e,w);return!f||!p?null:r.jsx(M,{ref:T,mod:[{initialized:R,hidden:C},o],...x("root"),...h})});E.displayName="@mantine/core/FloatingIndicator";E.classes=H;var K={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const Pe={withItemsBorders:!0},ze=Y((t,{radius:e,color:n,transitionDuration:s,size:c,transitionTimingFunction:u})=>({root:{"--sc-radius":e===void 0?void 0:xe(e),"--sc-color":n?me(n,t):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":s===void 0?void 0:`${s}ms`,"--sc-transition-timing-function":u,"--sc-padding":be(c,"sc-padding"),"--sc-font-size":ye(c)}})),P=q((t,e)=>{const n=L("SegmentedControl",Pe,t),{classNames:s,className:c,style:u,styles:m,unstyled:d,vars:b,data:f,value:p,defaultValue:y,onChange:o,size:l,name:g,disabled:h,readOnly:x,fullWidth:w,orientation:R,radius:C,color:T,transitionDuration:Je,transitionTimingFunction:Ze,variant:Q,autoContrast:U,withItemsBorders:X,mod:J,attributes:Z,...ee}=n,S=W({name:"SegmentedControl",props:n,classes:K,className:c,style:u,classNames:s,styles:m,unstyled:d,attributes:Z,vars:b,varsResolver:ze}),z=B(),O=f.map(i=>typeof i=="string"?{label:i,value:i}:i),te=Ie(),[ne,re]=a.useState(D()),[se,oe]=a.useState(null),[I,ae]=a.useState({}),ie=(i,_)=>{I[_]=i,ae(I)},[k,ce]=fe({value:p,defaultValue:y,finalValue:Array.isArray(f)?O.find(i=>!i.disabled)?.value??f[0]?.value??null:null,onChange:o}),F=Ce(g),ue=O.map(i=>a.createElement(M,{...S("control"),mod:{active:k===i.value,orientation:R},key:i.value},a.createElement("input",{...S("input"),disabled:h||i.disabled,type:"radio",name:F,value:i.value,id:`${F}-${i.value}`,checked:k===i.value,onChange:()=>!x&&ce(i.value),"data-focus-ring":z.focusRing,key:`${i.value}-input`}),a.createElement(M,{component:"label",...S("label"),mod:{active:k===i.value&&!(h||i.disabled),disabled:h||i.disabled,"read-only":x},htmlFor:`${F}-${i.value}`,ref:_=>ie(_,i.value),__vars:{"--sc-label-color":T!==void 0?de({color:T,theme:z,autoContrast:U}):void 0},key:`${i.value}-label`},r.jsx("span",{...S("innerLabel"),children:i.label})))),le=G(e,i=>oe(i));return Te(()=>{re(D())},[f.length]),f.length===0?null:r.jsxs(M,{...S("root"),variant:Q,size:l,ref:le,mod:[{"full-width":w,orientation:R,initialized:te,"with-items-borders":X},J],...ee,role:"radiogroup","data-disabled":h,children:[typeof k=="string"&&r.jsx(E,{target:I[k],parent:se,component:"span",transitionDuration:"var(--sc-transition-duration)",...S("indicator")},ne),ue]})});P.classes=K;P.displayName="@mantine/core/SegmentedControl";function Oe(){const t=a.createContext(null);function e({form:s,children:c}){return r.jsx(t.Provider,{value:s,children:c})}function n(){const s=a.useContext(t);if(!s)throw new Error("useFormContext was called outside of FormProvider context");return s}return[e,n,pe]}const De=[["path",{d:"M3 9a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2l0 -9",key:"svg-0"}],["path",{d:"M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2",key:"svg-1"}],["path",{d:"M12 12l0 .01",key:"svg-2"}],["path",{d:"M3 13a20 20 0 0 0 18 0",key:"svg-3"}]],A=j("outline","briefcase","Briefcase",De);const Ve=[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]],Be=j("outline","calendar","Calendar",Ve);const qe=[["path",{d:"M17.2 7a6 7 0 1 0 0 10",key:"svg-0"}],["path",{d:"M13 10h-8m0 4h8",key:"svg-1"}]],Le=j("outline","currency-euro","CurrencyEuro",qe);const We=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]],Ye=j("outline","plus","Plus",We);const Ge=[["path",{d:"M6.5 7.5a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3",key:"svg-1"}]],He=j("outline","tag","Tag",Ge);const Ke=[["path",{d:"M5 17a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M15 17a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M5 17h-2v-4m-1 -8h11v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5",key:"svg-2"}],["path",{d:"M3 9l4 0",key:"svg-3"}]],Qe=j("outline","truck-delivery","TruckDelivery",Ke),[dt,Ue,mt]=Oe(),Xe=({accounts:t,categories:e,vendors:n,accountsByName:s,categoriesByName:c,vendorsByName:u,size:m="xs"})=>{const d=Ue(),b=B(),f=he(`(max-width: ${b.breakpoints.sm})`),p=d.values.category?.categoryType==="Transfer",y=o=>{const l=o.replace(/\D/g,"");return l.length<=4?l:l.length<=6?`${l.slice(0,4)}-${l.slice(4)}`:`${l.slice(0,4)}-${l.slice(4,6)}-${l.slice(6,8)}`};return r.jsxs(ve,{gap:"xs",children:[r.jsx(P,{size:"xs",data:["Incoming","Outgoing","Transfer"],w:f?"100%":"fit-content",...d.getInputProps("category.categoryType")}),r.jsxs(v,{gutter:"md",align:"flex-end",children:[r.jsx(v.Col,{span:{base:12,md:1.2},children:r.jsx(V,{label:"Date",placeholder:"YYYY-MM-DD",leftSection:r.jsx(Be,{size:14}),...d.getInputProps("occurredAt"),onChange:o=>d.setFieldValue("occurredAt",y(o.target.value)),size:m})}),r.jsx(v.Col,{span:{base:12,md:2.3},children:r.jsx(V,{label:"Description",placeholder:"Rent, Lunch, etc.",leftSection:r.jsx(He,{size:14}),...d.getInputProps("description"),size:m})}),r.jsx(v.Col,{span:{base:12,md:p?2:1.5},children:r.jsx($,{label:"Account",data:(t||[]).map(o=>o.name),searchable:!0,placeholder:"Select...",leftSection:r.jsx(A,{size:14}),size:m,...d.getInputProps("fromAccountName"),onOptionSubmit:o=>{d.setFieldValue("fromAccount",s.get(o))}})}),p?r.jsx(v.Col,{span:{base:12,md:2},children:r.jsx($,{label:"To Account",data:(t||[]).map(o=>o.name),searchable:!0,placeholder:"Select...",leftSection:r.jsx(A,{size:14}),size:m,...d.getInputProps("toAccountName"),onOptionSubmit:o=>{d.setFieldValue("toAccount",s.get(o))}})}):r.jsxs(r.Fragment,{children:[r.jsx(v.Col,{span:{base:12,md:2},children:r.jsx($,{label:"Category",data:(e||[]).map(o=>o.name),searchable:!0,placeholder:"Select...",leftSection:r.jsx(A,{size:14}),size:m,...d.getInputProps("categoryName"),onOptionSubmit:o=>{d.setFieldValue("category",c.get(o))}})}),r.jsx(v.Col,{span:{base:12,md:1.5},children:r.jsx(we,{label:"Vendor",data:(n||[]).map(o=>o.name),...d.getInputProps("vendorName"),onChange:o=>{d.setFieldValue("vendorName",o),d.setFieldValue("vendor",u.get(o))},size:m,placeholder:"Vendor",leftSection:r.jsx(Qe,{size:14})})})]}),r.jsx(v.Col,{span:{base:12,md:1.2},children:r.jsx(ge,{label:"Amount",placeholder:"0.00",decimalScale:2,fixedDecimalScale:!0,hideControls:!0,leftSection:r.jsx(Le,{size:14}),size:m,...d.getInputProps("amount")})}),!f&&r.jsx(v.Col,{span:"auto",children:r.jsx(Re,{type:"submit",size:30,radius:"md",variant:"gradient",gradient:{from:"cyan",to:"blue",deg:135},"aria-label":"Create Transaction",children:r.jsx(Ye,{size:18})})})]})]})};Xe.__docgenInfo={description:"",methods:[],displayName:"TransactionFormFields",props:{accounts:{required:!0,tsType:{name:"union",raw:"AccountResponse[] | undefined",elements:[{name:"Array",elements:[{name:"AccountResponse"}],raw:"AccountResponse[]"},{name:"undefined"}]},description:""},categories:{required:!0,tsType:{name:"union",raw:"CategoryResponse[] | undefined",elements:[{name:"Array",elements:[{name:"CategoryResponse"}],raw:"CategoryResponse[]"},{name:"undefined"}]},description:""},vendors:{required:!0,tsType:{name:"union",raw:"Vendor[] | undefined",elements:[{name:"Array",elements:[{name:"Vendor"}],raw:"Vendor[]"},{name:"undefined"}]},description:""},accountsByName:{required:!0,tsType:{name:"Map",elements:[{name:"string"},{name:"AccountResponse"}],raw:"Map<string, AccountResponse>"},description:""},categoriesByName:{required:!0,tsType:{name:"Map",elements:[{name:"string"},{name:"CategoryResponse"}],raw:"Map<string, CategoryResponse>"},description:""},vendorsByName:{required:!0,tsType:{name:"Map",elements:[{name:"string"},{name:"Vendor"}],raw:"Map<string, Vendor>"},description:""},size:{required:!1,tsType:{name:"union",raw:"'xs' | 'sm'",elements:[{name:"literal",value:"'xs'"},{name:"literal",value:"'sm'"}]},description:"",defaultValue:{value:"'xs'",computed:!1}}}};export{Xe as T,dt as a,mt as u};
